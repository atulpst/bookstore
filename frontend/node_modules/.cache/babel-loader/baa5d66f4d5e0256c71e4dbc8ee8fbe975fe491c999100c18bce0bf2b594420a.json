{"ast":null,"code":"// frontend/src/components/Book.js\nimport React from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Book=_ref=>{let{book}=_ref;const loadScript=src=>{return new Promise(resolve=>{const script=document.createElement('script');script.src=src;script.onload=()=>resolve(true);script.onerror=()=>resolve(false);document.body.appendChild(script);});};const handlePayment=async()=>{const res=await loadScript('https://checkout.razorpay.com/v1/checkout.js');if(!res){alert('Razorpay SDK failed to load. Are you online?');return;}try{const orderResponse=await axios.post('https://bookstore-0o25.onrender.com/api/payment/order',{amount:book.price});const order=orderResponse.data;const options={key:\"rzp_test_RUSPpyS3EzFCI2\",// <<< IMPORTANT: PASTE YOUR KEY ID HERE\namount:order.amount,currency:order.currency,name:\"Gemini Bookstore\",description:\"Payment for \".concat(book.title),order_id:order.id,handler:async function(response){const verificationData={razorpay_order_id:response.razorpay_order_id,razorpay_payment_id:response.razorpay_payment_id,razorpay_signature:response.razorpay_signature};const verificationResponse=await axios.post('https://bookstore-0o25.onrender.com/api/payment/verify',verificationData);if(verificationResponse.data.status==='success'){alert(\"Payment successful! Payment ID: \".concat(response.razorpay_payment_id));}else{alert('Payment verification failed. Please contact support.');}},prefill:{name:\"Test User\",email:\"test.user@example.com\",contact:\"9999999999\"},theme:{color:\"#3399cc\"}};const paymentObject=new window.Razorpay(options);paymentObject.open();}catch(error){console.error(\"Payment error:\",error);alert('An error occurred during payment.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"book-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:book.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"by \",book.author]}),/*#__PURE__*/_jsxs(\"p\",{className:\"book-price\",children:[\"\\u20B9\",book.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"buy-button\",onClick:handlePayment,children:\"Buy Now (UPI/Cards)\"})]});};export default Book;","map":{"version":3,"names":["React","axios","jsx","_jsx","jsxs","_jsxs","Book","_ref","book","loadScript","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","handlePayment","res","alert","orderResponse","post","amount","price","order","data","options","key","currency","name","description","concat","title","order_id","id","handler","response","verificationData","razorpay_order_id","razorpay_payment_id","razorpay_signature","verificationResponse","status","prefill","email","contact","theme","color","paymentObject","window","Razorpay","open","error","console","className","children","author","onClick"],"sources":["/Users/atulpandey/BOOKSTORE/frontend/src/components/Book.js"],"sourcesContent":["// frontend/src/components/Book.js\n\nimport React from 'react';\nimport axios from 'axios';\n\nconst Book = ({ book }) => {\n\n    const loadScript = (src) => {\n        return new Promise((resolve) => {\n            const script = document.createElement('script');\n            script.src = src;\n            script.onload = () => resolve(true);\n            script.onerror = () => resolve(false);\n            document.body.appendChild(script);\n        });\n    };\n    \n    const handlePayment = async () => {\n        const res = await loadScript('https://checkout.razorpay.com/v1/checkout.js');\n        if (!res) {\n            alert('Razorpay SDK failed to load. Are you online?');\n            return;\n        }\n\n        try {\n            const orderResponse = await axios.post('https://bookstore-0o25.onrender.com/api/payment/order', {\n                amount: book.price,\n            });\n            const order = orderResponse.data;\n\n            const options = {\n                key: \"rzp_test_RUSPpyS3EzFCI2\", // <<< IMPORTANT: PASTE YOUR KEY ID HERE\n                amount: order.amount,\n                currency: order.currency,\n                name: \"Gemini Bookstore\",\n                description: `Payment for ${book.title}`,\n                order_id: order.id,\n                handler: async function (response) {\n                    const verificationData = {\n                        razorpay_order_id: response.razorpay_order_id,\n                        razorpay_payment_id: response.razorpay_payment_id,\n                        razorpay_signature: response.razorpay_signature,\n                    };\n                    \n                    const verificationResponse = await axios.post('https://bookstore-0o25.onrender.com/api/payment/verify', verificationData);\n                    \n                    if(verificationResponse.data.status === 'success') {\n                        alert(`Payment successful! Payment ID: ${response.razorpay_payment_id}`);\n                    } else {\n                        alert('Payment verification failed. Please contact support.');\n                    }\n                },\n                prefill: {\n                    name: \"Test User\",\n                    email: \"test.user@example.com\",\n                    contact: \"9999999999\",\n                },\n                theme: {\n                    color: \"#3399cc\",\n                },\n            };\n\n            const paymentObject = new window.Razorpay(options);\n            paymentObject.open();\n\n        } catch (error) {\n            console.error(\"Payment error:\", error);\n            alert('An error occurred during payment.');\n        }\n    };\n\n    return (\n        <div className=\"book-card\">\n            <h3>{book.title}</h3>\n            <p>by {book.author}</p>\n            <p className=\"book-price\">â‚¹{book.price}</p>\n            <button className=\"buy-button\" onClick={handlePayment}>\n                Buy Now (UPI/Cards)\n            </button>\n        </div>\n    );\n};\n\nexport default Book;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}